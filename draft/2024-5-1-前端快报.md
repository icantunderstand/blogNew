---
title: 2024-5-第一期
date: "2024-05-15"  
tags: ["weeklyReport"]
---


## [React 19 Beta](https://react.dev/blog/2024/04/25/react-19)
react 19已经在beta阶段了，初步看有以下的更新：
* 基于UI层功能的封装，提出了Action的概念，用Action就可以管理起来提交过程中的加载异常处理，对Form的处理也有相应的封装。这部分功能一定程度上能更清晰化组件的逻辑和功能拆分
* 一些已有功能的'大优化':
    * ref可以作为属性传递了，不用再使用forwardRef了
    * <Context /> 可以直接作为容器使用了，不用再用<Context.Provider> 转化一下
    * Custom Elements的支持
    * React Compiler
    * 组件内部提供了对原生js标签的支持，包括stylesheets,预加载标签等

            import { prefetchDNS, preconnect, preload, preinit } from 'react-dom'
            function MyComponent() {
                preinit('https://.../path/to/some/script.js', {as: 'script' }) // loads and executes this script eagerly
                preload('https://.../path/to/font.woff', { as: 'font' }) // preloads this font
                preload('https://.../path/to/stylesheet.css', { as: 'style' }) // preloads this stylesheet
                prefetchDNS('https://...') // when you may not actually request anything from this host
                preconnect('https://...') // when you will request something but aren't sure what
            }
    
## [How to Securely Send a Request When Closing Tabs](https://webdeveloper.beehiiv.com/p/securely-send-request-closing-tabs)
可以结合visibilitychange和navigator.sendBeacon实现关闭页面后的数据发送

## [You don't need useState in React](https://www.nico.fyi/blog/you-dont-need-usestate-in-react)
react在写法上有着很大的自由度，这种自由度在多人协作或者项目的长期发展中容易造成一定的问题。比如组件内hooks的泛滥。需要做好UI逻辑和数据逻辑的拆分才能更好的梳理好代码的结构。