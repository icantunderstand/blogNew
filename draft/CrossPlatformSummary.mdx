---
title: 跨端技术整理&思考
date: '2024-06-11'
tags: ['crossPlatform']
---

## 跨端的本质
一句话概括: 如何通过技术手段以较低成本和较高的稳定性实现端业务的快速发展

| 目标 | 考量点 |
| ------ | ------ | 
| 动态化 | 	1. 包体积问题是一个app发展到一定阶段必定要考量的问题,也是一些大厂在内部推动跨端方案的一个核心诉求 2. 业务动态化诉求(快速迭代/动态更新)| 
| 人效 | 跨端方案可以实现一次开发多端使用,提升人效 1. 原生能力需要端接入或者端技术能力,长期需要多端技术能力 2. 多端展现存在差异,需要开发中磨平 3. 通常说跨端都从h5(动态化技术)的视角切入,h5和native不是非此即彼的关系,事是大家的   | 
| 性能 | 技术方案存在性能瓶颈,通过其他技术方案可以解决性能问题,优化业务体验 | 
| 技术基建能力    | 1. 技术储备 2. 业务在不同技术方案下探索(小程序) | 

## react native架构

### react native旧架构的问题

原有的架构下js侧和native侧通过Bridge(桥)来实现通信。桥有一些固有的限制:

- 异步
- 单线程 js是单线程的,在js侧的计算也是在单线程中进行
- 带来了额外的开销 需要进行数据序列化

### react native新架构

- JavaScript层引入JSI(JavaScript Interface),JSI作为JSC上一层的抽象可以实现引擎的替换,JavaScript拥有了持有C++对象引用的能力,从而实现直接调用Native代码
- Turbo Modules 新的模块系统 - 通过JSI通信/可异步加载/类型
- Fabric 新的渲染器

## react native交互的线程

- UI Thread: Android/iOS(或其它平台)应用中的主线程
- Shadow Thread:进行布局计算和构造 UI 界面的线程
- JS Thread:React 等 JavaScript 代码都在这个线程执行
- Native Modules 线程

## lynx

## 编译方案

## 参考

[React Native架构演进](http://www.ayqy.net/blog/react-native-new-architecture/)
[为何要设计新架构](https://reactnative.cn/docs/the-new-architecture/why)
