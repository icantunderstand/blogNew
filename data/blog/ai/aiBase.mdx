---
title: AI探秘-大模型基础概念
date: "2025-09-03"
tags: ["AI"]
---

## AI Agent
AI Agent是一个**系统**，它通过为大模型(LLM)提供工具和知识访问权限，使其能够**执行操作**并扩展其能力。

AI Agent是一个由多个组件组成的系统，它包括:
* **Sensors(传感器)**:负责从环境中收集各种类型的信息，并将这些信息传递给Agent的核心决策系统
* **Actuators(执行器)**:执行Agent的决策动作，获得环境反馈，影响环境状态
* **Memory(记忆)**:存储和管理Agent的信息，包括历史记录、经验积累、知识管理和上下文保持
* **Planner(规划器)**:制定行动计划和策略，包括目标分析、路径规划、资源分配和风险评估
* **Reasoner(推理器)**:进行逻辑推理和决策分析，包括因果分析、决策支持和问题诊断
* **Communicator(通信器)**:处理信息交换和交互沟通，支持多模态通信和协议适配

AI Agent系统采用双层认知架构,包括认知层(Cognitive Layer)和元认知层(Metacognitive Layer),这种设计使Agent能够像人类一样进行智能思考和自我调节。
* 认知层(Cognitive Layer) 感知(Sensors)、推理(Reasoner)、决策(Planner)、执行(Actuators)、记忆(Memory)、通信(Communicator)
* 元认知层(Metacognitive Layer) 监控、评估、调节、优化、策略选择、学习

### AI Agent类型

| AI Agent类型 | 描述 | 优缺点 |
|------------|-------------|---------|
| **Simple Reflex Agents(简单反射型Agent)** | 基于预定义规则执行即时动作，不考虑历史或未来 | 响应快速，实现简单，无法处理部分可观察环境，缺乏记忆 |
| **Model-Based Reflex Agents(基于模型的反射型Agent)** | 基于世界模型和模型变化执行动作 | 能够处理部分可观察环境，具有记忆，但实现复杂 |
| **Goal-Based Agents(目标导向型Agent)** | 通过解释目标并确定达成目标的行动来创建计划 | 能处理复杂任务，方向明确，可能陷入局部最优 |
| **Utility-Based Agents(基于效用的Agent)** | 考虑偏好并通过数值权衡来确定如何达成目标 | 能平衡多个目标，决策更理性，效用函数设计复杂 |
| **Learning Agents(学习型Agent)** | 通过响应反馈并相应调整行动来随时间改进 | 适应性强，能处理未知情况，需要大量训练数据 |
| **Hierarchical Agents(层次型Agent)** | 具有分层系统中的多个代理，高层代理将任务分解为子任务供低层代理完成 | 能处理复杂任务，模块化设计，层级设计复杂，通信开销大 |
| **Multi-Agent Systems (多Agent系统)** | 多个Agent协作或竞争完成任务 | 能处理分布式复杂问题，协调困难，可能出现冲突 |

## AI Agent框架
AI Agent框架是软件开发框架，专门用于构建、部署和管理AI Agent系统。它提供了一套完整的工具、库、API和基础设施，让开发者能够快速创建智能代理应用。

### 主流AI Agent框架对比

| 框架名称 | 开发语言 | 核心特性 | 适用场景 | 学习曲线 |
|---------|----------|----------|----------|----------|
| **LangChain** | Python/JS | 链式调用、工具丰富、生态完善 | 通用应用、快速原型 | 中等 |
| **AutoGPT** | Python | 自主执行、目标导向、任务分解 | 自动化任务、创意工作 | 简单 |
| **CrewAI** | Python | 多Agent协作、角色定义、任务分配 | 团队协作、复杂项目 | 中等 |
| **LlamaIndex** | Python | 数据索引、知识检索、RAG优化 | 知识库、文档处理 | 简单 |
| **Semantic Kernel** | C#/Python | 企业级、多语言、插件系统 | 企业应用、.NET生态 | 中等 |
| **LangGraph** | Python | 图状态机、复杂流程、状态管理 | 复杂工作流、状态机 | 较难 |


## Agentic RAG(智能代理检索增强生成)
Agentic RAG是传统RAG(Retrieval-Augmented Generation)的升级版本，它将AI Agent的智能决策能力与RAG的信息检索能力相结合，创造出更加智能和主动的信息处理系统。

### Agentic RAG的循环交互模式

Agentic RAG系统依赖循环交互模式，通过多轮迭代不断优化检索策略和结果质量。

#### 1. **初始调用(Initial Call)**
- **用户目标传递**:用户提示被传递给LLM
- **意图分析**:系统分析用户的具体需求和目标
- **任务规划**:制定初步的信息检索和处理计划

#### 2. **工具调用(Tool Calling)**
- **信息缺口识别**:模型识别当前信息的不完整性或模糊性
- **工具选择**:选择合适的工具或检索方法
- **检索执行**:
  - 向量数据库查询(如Azure AI Search Hybrid搜索)
  - 结构化SQL调用
  - 外部API调用
  - 知识图谱查询

#### 3. **评估与优化(Evaluation & Optimization)**
- **信息充分性评估**:审查返回的数据是否满足需求
- **质量检查**:评估信息的准确性、相关性和完整性
- **策略调整**:
  - 优化查询参数
  - 尝试不同的检索工具
  - 调整检索策略和方法

#### 4. **重复直到满意(Iterate Until Satisfied)**
- **持续循环**:重复检索-评估-优化过程
- **收敛判断**:直到模型认为已获得足够清晰度和证据
- **最终响应**:提供经过深思熟虑的最终答案

#### 5. **记忆与状态(Memory & State)**
- **状态保持**:系统在步骤间保持状态和记忆
- **历史记录**:回忆之前的尝试及其结果
- **智能决策**:避免重复循环，做出更明智的决策

## MCP

MCP(Model Context Protocol)是由Anthropic发布了一种大模型与外部数据源工具的集成标准。它定义了大模型如何安全、高效地访问和利用外部资源。
- 模型幻觉 大模型回答不了解的问题时可能产生虚假信息
- 信息过时 训练数据可能过时，无法提供最新信息
- 功能局限 大模型只能对话，无法执行实际任务

### MCP Host(宿主应用)

通常是LLM的宿主应用。主要负责
* 创建和管理MCP Client
* 与大模型LLM交互
* 实现安全策略和权限控制
* 协调整个MCP系统

### MCP Client(客户端)
MCP Client是与大模型直接交互的组件
* 与MCP Server交互获取可用工具
* 接收大模型的工具调用请求
* 执行对MCP Server的工具调用
* 将结果返回给大模型

### MCP Server(服务器)
MCP Server提供具体工具和服务的组件
* 提供各种工具和服务
* 处理来自Client的工具调用
* 执行具体的业务逻辑
* 返回执行结果

![MCP架构](/static/images/aiStatic/aiMCP/mcpStruct.jpg)

## A2A
A2A(Agent-to-Agent)是一种专门用于AI Agent之间进行通信、协作和协调的协议标准，它定义了多个Agent如何相互理解、协作和协调行动。

### **协议层次结构**
```
┌─────────────────────────────────────┐
│           应用层协议                │
│  (任务协作、知识共享、决策协调)      │
├─────────────────────────────────────┤
│           会话层协议                │
│  (对话管理、状态同步、上下文维护)    │
├─────────────────────────────────────┤
│           传输层协议                │
│  (消息传递、数据交换、安全传输)      │
├─────────────────────────────────────┤
│           网络层协议                │
│  (连接建立、路由选择、网络管理)      │
└─────────────────────────────────────┘
```

### **核心组件**
- **Agent Registry**: Agent注册和发现服务
- **Message Router**:消息路由和分发
- **Collaboration Engine**:协作引擎和协调器
- **Security Manager**:安全管理和权限控制

### **A2A通信模式**

#### **点对点通信**
```
Agent A ←→ Agent B
```
- **直接通信**:两个Agent直接交换消息
- **双向交互**:支持双向的信息交换
- **实时响应**:支持实时的交互和响应

#### **广播通信**
```
Agent A → 广播消息 → Agent B, C, D...
```
- **一对多通信**:一个Agent向多个Agent广播消息
- **事件通知**:通知系统中的重要事件
- **状态同步**:同步系统状态信息

#### **组播通信**
```
Agent A → 组播消息 → Agent组 {B, C, D}
```
- **选择性广播**:向特定的Agent组发送消息
- **角色管理**:基于角色和权限的消息分发
- **协作协调**:协调特定组内的Agent行动

### **A2A协作模式**

#### **主从协作**
```
主Agent → 任务分配 → 从Agent
    ↓
结果收集 ← 任务执行 ← 从Agent
```
- **任务分解**:主Agent将任务分解为子任务
- **资源分配**:分配任务给合适的从Agent
- **结果整合**:收集和整合各从Agent的执行结果

#### **对等协作**
```
Agent A ←→ 协商 ←→ Agent B
    ↓           ↓
任务A        任务B
    ↓           ↓
结果A ←→ 结果整合 ←→ 结果B
```
- **平等地位**:所有Agent地位平等
- **协商机制**:通过协商确定协作方式
- **结果整合**:整合各Agent的执行结果

#### **竞争协作**
```
Agent A ←→ 竞争 ←→ Agent B
    ↓           ↓
资源竞争    任务竞争
    ↓           ↓
协商解决 ←→ 冲突解决 ←→ 协商解决
```
- **资源竞争**:竞争有限的资源
- **任务竞争**:竞争任务执行权
- **冲突解决**:通过协商解决冲突

## 附录
[MCP.so](https://mcp.so/)   
[Smithery](https://smithery.ai/)  
[MCP(Model Context Protocol)的理解和快速实践](https://mp.weixin.qq.com/s/NU62Dvq3SMO6O-He9lcQ4Q)
